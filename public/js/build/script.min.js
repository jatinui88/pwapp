var Page=function(){function a(){var a=this;a.products=ko.observableArray([])}return{vm:new a,hideOfflineWarning:function(){document.querySelector(".main-content").classList.remove("loading"),document.getElementById("offline").remove()},showOfflineWarning:function(){document.querySelector(".main-content").classList.add("loading");var a=new XMLHttpRequest;a.open("GET","./offline.html",!0),a.onload=function(){if(200===a.status){var b=document.createElement("div");b.setAttribute("id","offline"),b.innerHTML=a.responseText,document.getElementById("main").appendChild(b)}else console.warn("Error retrieving offline.html")},a.onerror=function(){console.error("Connection error")},a.send()}}}(),Products=function(){function a(){var a=this;a.url="",a.title="",a.detail="",a.price=""}function b(){var a=this;a.getAll=function(){return new Promise(function(a,b){var c=new XMLHttpRequest;c.open("GET","./api/data.json"),c.onload=function(){200===c.status?a(JSON.parse(c.response)):b(Error(c.statusText))},c.onerror=function(){b(Error("Network Error"))},c.send()})}}function c(){var b=this;b.toProductViewModel=function(b){if(b){var c=new a;return c.url=b.url,c.title=b.title,c.detail=b.detail,c.price=b.price,c}return null},b.toProductViewModels=function(a){return a&&a.length>0?a.map(function(a){return b.toProductViewModel(a)}):[]}}function d(a,b){var c=this;c.getAll=function(){return e.getAll().then(function(a){return b.toProductViewModels(a)})}}var e=new b,f=new c,g=new d(e,f);return{loadData:function(){document.querySelector(".main-content").classList.add("loading"),g.getAll().then(function(a){Page.vm.products(a),document.querySelector(".main-content").classList.remove("loading")})}}}();"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(function(a){console.log("Successfully registered service worker",a)}).catch(function(a){console.warn("Error whilst registering service worker",a)}),window.addEventListener("online",function(a){console.log("You are online"),Page.hideOfflineWarning(),Products.loadData()},!1),window.addEventListener("offline",function(a){console.log("You are offline"),Page.showOfflineWarning()},!1),navigator.onLine?Products.loadData():Page.showOfflineWarning(),ko.applyBindings(Page.vm);